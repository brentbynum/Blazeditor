@page "/login"
@inject Microsoft.AspNetCore.Antiforgery.IAntiforgery Antiforgery
@inject Microsoft.AspNetCore.Http.IHttpContextAccessor HttpContextAccessor
@inject NavigationManager Navigation

<h3>Login</h3>
@if (Error)
{
    <div class="alert alert-danger">Invalid username or password.</div>
}
<form method="post" action="/login">
    <input name="username" placeholder="Username" class="form-control mb-2" />
    <input name="password" placeholder="Password" type="password" class="form-control mb-2" />
    @if (HttpContextAccessor.HttpContext != null)
    {
        var tokens = Antiforgery.GetAndStoreTokens(HttpContextAccessor.HttpContext);
        <input type="hidden" name="@tokens.FormFieldName" value="@tokens.RequestToken" />
    }
    <button class="btn btn-primary" type="submit">Login</button>
</form>

@code {
    [Parameter]
    [SupplyParameterFromQuery]
    public bool Error { get; set; }
}
