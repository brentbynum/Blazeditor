@page "/area/{areaId:int}"
@attribute [Authorize]

@using Blazeditor.Application.Components.Dialogs
@using Blazeditor.Application.Services
@using Microsoft.AspNetCore.Authorization
@using Microsoft.JSInterop
@inject DefinitionManager Definition
@inject IJSRuntime JS

<h1>@Area?.Name</h1>
<div class="container-fluid">
    <div class="row">
        <div class="col-8">

            @if (Area != null)
            {
                <TileMapCanvas Area="@Area" SelectedTileId="@(SelectedTile != null ? SelectedTile.Id : -1)" ActiveLevel="@ActiveLevel" />
            }

        </div>
        <div class="col-4 border rounded p-2 canvas-container">

            @if (Area != null)
            {
                <TilePaletteCanvas Area="@Area" OnTileSelected="OnTileSelected" OnPaletteImport="OnPaletteImport" />
                <MapLevelSelector Levels="Area.TileMaps" ActiveLevel="@ActiveLevel" OnLevelSelected="OnLevelSelected" OnRemoveLevel="OnRemoveLevel" OnAddLevel="OnAddLevel" />
                @if (SelectedTile != null)
                {
                    <h3>@SelectedTile.Name</h3>
                    <img src="@SelectedTile.Image" />
                }
            }
        </div>

    </div>
</div>

